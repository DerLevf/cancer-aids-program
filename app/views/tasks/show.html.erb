<div class="task-details">
  <div class="header-section">
    <h2><%= @task.title %></h2>
    <div class="action-buttons">
      <% if policy(@task).update? %>
        <%= link_to "Bearbeiten", edit_debt_project_task_path(@debt_project, @task), class: "btn btn-warning" %>
      <% end %>

      <% if policy(@task).destroy? %>
        <%= button_to "Löschen", debt_project_task_path(@debt_project, @task), method: :delete, 
              data: { turbo_confirm: "Willst du diese Aufgabe wirklich löschen?" }, 
              class: "btn btn-danger" %>
      <% end %>
    </div>
  </div>

  <div class="details-section card">
    <p><strong>Beschreibung:</strong> <%= @task.description %></p>
    <p>
      <strong>Zugewiesen an:</strong> 
      <% if @task.assigned_user %>
        <span class="member-tag debtor"><%= @task.assigned_user.username %></span>
      <% else %>
        Nicht zugewiesen
      <% end %>
    </p>
    <p><strong>Status:</strong> 
  <% unless @task.status == "completed" %>
    <span class="member-tag status-<%= @task.status %>">
      <%= @task.status.humanize %>
    </span>
  <% else %>
    <em>Erledigt (wird im Archiv angezeigt)</em>
  <% end %>
</p>
    
    <% if @task.deadline %>
      <p><strong>Frist:</strong> <%= @task.deadline.strftime("%d.%m.%Y") %></p>
    <% end %>
    <p><strong>Erstellt am:</strong> <%= @task.created_at.strftime("%d.%m.%Y") %></p>
  </div>
</div>

<%= link_to "Zurück zur Schuldengruppe", debt_project_path(@debt_project), class: "back-link" %>